
<div class="row">
	<div class="col-md-3">
		<div class="center">
			<% if @photographer.user.avatar? %>
				<%= image_tag @photographer.user.avatar, class: "avatar-full" %>
			<% elsif @photographer.user.image? %>
				<%= image_tag avatar_url(@photographer.user), class: "avatar-full" %>
			<% else %>
				<%= image_tag 'http://www.abruzzo24ore.tv/img/3bcda8f2aed2c8f1fdea1c020dadcf39/w/300/19332.jpg', class: "avatar-full" %>
			<% end %>
		</div>
		<div class="panel panel-default">
			<div class="panel-heading">Identificazione</div>
			<div class="panel-body">
				Email<br/>
				Telefono
			</div>
		</div>
	</div>


	<div class="col-md-9">
		<div class="panel panel-default">
			<div class="panel-body">

				<!-- Info principali -->
				<div class="row">
					<div class="col-md-3 text-center">
						<% if (current_user.id == @photographer.user_id) %>
							<%= link_to "Modifica annuncio", edit_photographer_path(current_user.photographer), class: "btn btn-primary btn-block" %>
						<% else %>
							<% if @photographer.user.avatar? %>
								<%= image_tag @photographer.user.avatar(:thumb), class: "img-circle avatar-large" %>
							<% elsif @photographer.user.image? %>
								<%= image_tag avatar_url(@photographer.user), class: "img-circle avatar-large" %>
							<% else %>
								<%= image_tag 'http://www.abruzzo24ore.tv/img/3bcda8f2aed2c8f1fdea1c020dadcf39/w/300/19332.jpg', class: "img-circle avatar-large" %>
							<% end %>
							<br>
							<%= @photographer.user.nome %>
						<% end %>
					</div>

					<div class="col-md-9" >
						<div class="row">
							<h4><%= @photographer.nome %></h4>
							<h5><%= @photographer.titolo %></h5>
						</div>
					</div>
				</div>

				<!-- Image carousel -->
				<div class="row">
					<div class="col-md-12 center">
						<div id="myCarousel" class="carousel slide" data-ride="carousel">
						  <!-- Indicators -->
						  <% if @photos %>
							  <ol class="carousel-indicators">
								  <% @photos.each do |photo| %>
								    <li data-target="#myCarousel" data-slide-to="<%= photo.id %>"></li>
								  <% end %> 
							  </ol>
						  <% end %>

						  <!-- Wrapper for slides -->
						  <div class="carousel-inner" role="listbox">
						  	<% if @photos %>
						  		<% @photos.each do |photo| %>
							    	<div class="item <%= 'active' if photo.id == @photos[0].id %>">
							       		<%= image_tag photo.image.url(), class: "img-responsive" %>
							    	</div>
							    <% end %>
						    <% end %>
						  </div>

						  <!-- Left and right controls -->
						  <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
						    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
						    <span class="sr-only">Previous</span>
						  </a>
						  <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
						    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
						    <span class="sr-only">Next</span>
						  </a>
						</div>

					</div>
				</div>

				<br/>

				<div class="row">
					<div class="col-md-12">

								<!-- Info secondarie -->
								<div class="row text-center">
									<% unless @photographer.tempi_consegna.blank? %>
										<div class="col-md-4">
											<i class="fa fa-clock-o fa-2x"></i><br>
											Consegna in <%= @photographer.tempi_consegna %>
										</div>
									<% end %>
									<% unless @photographer.num_foto.blank? %>
										<div class="col-md-4">
											<i class="fa fa-camera fa-2x"></i><br>
											Foto consegnate: <%= @photographer.num_foto %>
										</div>
									<% end %>
									<% unless @photographer.durata_video.blank? %>
										<div class="col-md-4">
											<i class="fa fa-video-camera fa-2x"></i><br>
											Durata video: <%= @photographer.durata_video %>
										</div>
									<% end %>
								</div>

								<hr>

								<h4>indirizzo</h4>
								<p><%= @photographer.indirizzo %></p>

								<hr>

								<h4>Maggiori informazioni</h4>
								<p><%= simple_format(@photographer.descrizione) %></p>
								
								<hr>

								<h4>Gestione imprevisti</h4>
								<p><%= @photographer.imprevisti %></p>

								<h4>Politica di cancellazione</h4>
								<p><%= @photographer.cancellazione %></p>

								<hr>

						<!-- form per prenotazione -->
						<div class="row">
							<div class="col-md-12">
								<%= render 'reservations/form' %>
							</div>
						</div>

						<hr>

						<!-- google maps -->
						<div class="row">
							<div class="col-md-12">
								
								<div id="map"></div>

								<style>
							      #map {
							        width: 100%;
							        height: 400px;
							      }
							    </style>

							    <script>
							      function initMap() {
							        var mapDiv = document.getElementById('map');

							        var map = new google.maps.Map(mapDiv, {
							          center: {lat: <%= @photographer.latitude %>, lng: <%= @photographer.longitude %>},
							          zoom: 11
							        });

							        var marker = new google.maps.Marker({
							        	position: {lat: <%= @photographer.latitude %>, lng: <%= @photographer.longitude %>},
							        	title: "<%= @photographer.nome %>"
							        });
							        marker.setMap(map);
							      }
							    </script>
							    <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"
							        async defer></script>

							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
</div>