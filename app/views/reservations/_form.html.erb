<%= form_for([@photographer, @photographer.reservations.new]) do |f| %>

	<div class="row">
		<div class="col-md-12">
		
			<!-- servizi -->
			<% if (!@photographer.foto_cerimonia.blank?) %>
				<div class="form-group">
					<%= f.check_box :foto_cerimonia, class: "form-checkbox", name: @photographer.foto_cerimonia %> Foto cerimonia: €<%= @photographer.foto_cerimonia %>
				</div>
			<% end %>
			<% if (!@photographer.video_cerimonia.blank?) %>
				<div class="form-group">
					<%= f.check_box :video_cerimonia, class: "form-checkbox", name: @photographer.video_cerimonia %> Video cerimonia: €<%= @photographer.video_cerimonia %>
				</div>
			<% end %>
			<% if (!@photographer.foto_pre.blank?) %>
				<div class="form-group">
					<%= f.check_box :foto_pre, class: "form-checkbox", name: @photographer.foto_pre %> Foto pre-cerimonia: €<%= @photographer.foto_pre %>
				</div>
			<% end %>
			<% if (!@photographer.video_pre.blank?) %>
				<div class="form-group">
					<%= f.check_box :video_pre, class: "form-checkbox", name: @photographer.video_pre %> Video pre-cerimonia: €<%= @photographer.video_pre %>
				</div>
			<% end %>
			<% if (!@photographer.foto_post.blank?) %>
				<div class="form-group">
					<%= f.check_box :foto_post, class: "form-checkbox", name: @photographer.foto_post %> Foto post-cerimonia: €<%= @photographer.foto_post %>
				</div>
			<% end %>
			<% if (!@photographer.video_post.blank?) %>
				<div class="form-group">
					<%= f.check_box :video_post, class: "form-checkbox", name: @photographer.video_post %> Video post-cerimonia: €<%= @photographer.video_post %>
				</div>
			<% end %>
			<% if (!@photographer.prematrimoniale_foto.blank?) %>
				<div class="form-group">
					<%= f.check_box :prematrimoniale_foto, class: "form-checkbox", name: @photographer.prematrimoniale_foto %> Servizio fotografico prematrimoniale: €<%= @photographer.prematrimoniale_foto %>
				</div>
			<% end %>
			<% if (!@photographer.prematrimoniale_video.blank?) %>
				<div class="form-group">
					<%= f.check_box :prematrimoniale_video, class: "form-checkbox", name: @photographer.prematrimoniale_video %> Servizio video prematrimoniale: €<%= @photographer.prematrimoniale_video %>
				</div>
			<% end %>
			<% if (!@photographer.trash_dress_foto.blank?) %>
				<div class="form-group">
					<%= f.check_box :trash_dress_foto, class: "form-checkbox", name: @photographer.trash_dress_foto %> Servizio fotografico "Trash the Dress": €<%= @photographer.trash_dress_foto %>
				</div>
			<% end %>
			<% if (!@photographer.trash_dress_video.blank?) %>
				<div class="form-group">
					<%= f.check_box :trash_dress_video, class: "form-checkbox", name: @photographer.trash_dress_video %> Servizio video "Trash the Dress": €<%= @photographer.trash_dress_video %>
				</div>
			<% end %>
			<% if (!@photographer.second_camera.blank?) %>
				<div class="form-group">
					<%= f.check_box :second_camera, class: "form-checkbox", name: @photographer.second_camera %> Fotografo addizionale: €<%= @photographer.second_camera %>
				</div>
			<% end %>
			<% if (!@photographer.second_videocamera.blank?) %>
				<div class="form-group">
					<%= f.check_box :second_videocamera, class: "form-checkbox", name: @photographer.second_videocamera %> Cameraman addizionale: €<%= @photographer.second_videocamera %>
				</div>
			<% end %>
				<!-- prodotti -->
			<% if (!@photographer.foto_hd.blank?) %>
				<div class="form-group">
					<%= f.check_box :foto_hd, class: "form-checkbox", name: @photographer.foto_hd %> Consegna foto via web €<%= @photographer.foto_hd %>
				</div>
			<% end %>
			<% if (!@photographer.negativi.blank?) %>
				<div class="form-group">
					<%= f.check_box :negativi, class: "form-checkbox", name: @photographer.negativi %> Consegna negativi: €<%= @photographer.negativi %>
				</div>
			<% end %>
			<% if (!@photographer.trailer_foto.blank?) %>
				<div class="form-group">
					<%= f.check_box :trailer_foto, class: "form-checkbox", name: @photographer.trailer_foto %> Trailer fotografico: €<%= @photographer.trailer_foto %>
				</div>
			<% end %>
			<% if (!@photographer.trailer_video.blank?) %>
				<div class="form-group">
					<%= f.check_box :trailer_video, class: "form-checkbox", name: @photographer.trailer_video %> Trailer video: €<%= @photographer.trailer_video %>
				</div>
			<% end %>
			<% if (!@photographer.drone.blank?) %>
				<div class="form-group">
					<%= f.check_box :drone, class: "form-checkbox", name: @photographer.drone %> Drone: €<%= @photographer.drone %>
				</div>
			<% end %>
		</div>
	</div>


	<!-- prodotti numerici -->
	<div class="row">
		<% if (!@photographer.album.blank?) %>
			<div class="col-md-4">
				<div class="form-group">
					<%= f.number_field :num_album, class: "form-control", min: 0, id: "album", placeholder: "Quanti album desideri?" %> Album: €<%= @photographer.album %> cada uno
				</div>
			</div>
		<% end %>
		<% if (!@photographer.mini_album.blank?) %>
			<div class="col-md-4">
				<div class="form-group">
					<%= f.number_field :num_mini_album, class: "form-control", min: 0, id: "mini_album", placeholder: "Quanti mini-album desideri?" %> Mini album: €<%= @photographer.mini_album %> cada uno
				</div>
			</div>
		<% end %>
		<% if (!@photographer.dvd.blank?) %>
			<div class="col-md-4">
				<div class="form-group">
					<%= f.number_field :num_dvd, class: "form-control", min: 0, id: "dvd", placeholder: "Quanti dvd desideri?" %> Dvd: €<%= @photographer.dvd %> cada uno
				</div>
			</div>
		<% end %>
	</div>
	
	<input type="hidden" id="costo_trasferta" value="<%= @trasferta_price %>" />
	<input type="hidden" id="album_value" value="<%= @photographer.album %>" />
	<input type="hidden" id="mini_album_value" value="<%= @photographer.mini_album %>" />
	<input type="hidden" id="dvd_value" value="<%= @photographer.dvd %>" />
	<input type="hidden" id="total_trasferta" value="0" />
	<input type="hidden" id="total_album" value="0" />
	<input type="hidden" id="total_mini_album" value="0" />
	<input type="hidden" id="total_dvd" value="0" />
	<input type="hidden" id="total_services" value="0" />


	<!-- info base -->
	<div class="row">
		<div class="col-md-12">
			<h5>Costo trasferta a <%= current_user.wedding.indirizzo %>: <%= @trasferta_price %> €</h5>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<h3>Totale: <span id="total_text"> <%= @trasferta_price %></span> €</h3>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<div class="form-group">
				<%= f.submit "Invia richiesta", class: "btn btn-primary btn-block" %>
			</div>
		</div>
	</div>
	
<% end %>

<hr>





<script>

	$(function () {


		var servizi = document.getElementsByClassName("form-checkbox");

		for (var i = 0, len = servizi.length; i < len; i++) {
		    servizi[i].onclick = addServices;
		}

		var album = document.getElementById("album");
			album.onchange = addAlbum;

		var mini_album = document.getElementById("mini_album");
			mini_album.onchange = addMiniAlbum;

		var dvd = document.getElementById("dvd");
			dvd.onchange = addDvd;

		var indirizzo = document.getElementById("indirizzo");
			indirizzo.onchange = addTrasferta;

	});

	function addServices() {
	    var total = parseInt(document.getElementById("total_services").value);
	    var value = parseInt(this.name);
	    
	    if (this.checked) {
	        total += parseInt(value);
	    } else {
	        total -= parseInt(value);
	    }

	    $("#total_services").val(total);
	    addTotal();
	}

	function addAlbum() {
	    var total = parseInt(document.getElementById("total_album").value);
	    var num = this.value;
	    var price = parseInt(document.getElementById("album_value").value);

	    total = 1 * parseInt(num) * parseInt(price);

	    $("#total_album").val(total);
	    addTotal();
	}

		function addMiniAlbum() {
	    var total = parseInt(document.getElementById("total_mini_album").value);
	    var num = this.value;
	    var price = parseInt(document.getElementById("mini_album_value").value);

	    total = 1 * parseInt(num) * parseInt(price);

	    $("#total_mini_album").val(total);
	    addTotal();
	}

		function addDvd() {
	    var total = parseInt(document.getElementById("total_dvd").value);
	    var num = this.value;
	    var price = parseInt(document.getElementById("dvd_value").value);

	    total = 1 * parseInt(num) * parseInt(price);

	    $("#total_dvd").val(total);
	    addTotal();
	}

	function addTotal() {
		var total_services = parseInt(document.getElementById("total_services").value);
		var total_album = parseInt(document.getElementById("total_album").value);
		var total_mini_album = parseInt(document.getElementById("total_mini_album").value);
		var total_dvd = parseInt(document.getElementById("total_dvd").value);
		var costo_trasferta = parseInt(document.getElementById("costo_trasferta").value);
		var total = parseInt(total_services)+parseInt(total_album)+parseInt(total_mini_album)+parseInt(total_dvd)+parseInt(costo_trasferta);

		$("#total_text").text(total);
		console.log(total)

	}
</script>