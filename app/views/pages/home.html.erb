<% if !user_signed_in? %>
	vai

<% elsif !@address.blank? %>
	<div class="row">
		<div class="col-md-10">
			<h4>Fotografi disponibili per matrimoni a <%= @user.address.indirizzo %></h4>
		</div>
		<div class="col-md-2">
			<button type="button" class="btn btn-default" data-toggle="modal" data-target="#myModal">
			  Cambia indirizzo
			</button>
			<div class="modal fade" tabindex="-1" role="dialog" id="myModal">
			  <div class="modal-dialog">
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			        <h4 class="modal-title">Cambia l'indirizzo del tuo matrimonio</h4>
			      </div>
			      <div class="modal-body">
			        <%= form_for @address do |f| %>
						
						<div class="form-group">
							<%= f.text_field :indirizzo, class: "form-control", placeholder: "Inserisci il nuovo indirizzo" %>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Chiudi</button>
							<%= f.submit "Aggiorna indirizzo", class: "btn btn-primary" %>
						</div>
					<% end %>
			      </div>
			    </div><!-- /.modal-content -->
			  </div><!-- /.modal-dialog -->
			</div><!-- /.modal --> 
		</div>
	</div>
<% else %>
	<div class="row">
		<div class="col-md-10">
		<h4>Ecco tutti i fotografi presenti su matrifoto. Inserisci l'indirizzo del tuo matrimonio per trovare quelli disponibili.</h4>
		</div>
		<div class="col-md-2">
			<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
			  Inserisci indirizzo
			</button>
			<div class="modal fade" tabindex="-1" role="dialog" id="myModal">
			  <div class="modal-dialog">
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			        <h4 class="modal-title">Cambia l'indirizzo del tuo matrimonio</h4>
			      </div>
			      <div class="modal-body">
			        <%= form_for Address.new do |f| %>	
						<div class="form-group">
							<%= f.text_field :indirizzo, class: "form-control", placeholder: "Inserisci il nuovo indirizzo" %>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Chiudi</button>
							<%= f.submit "Aggiorna indirizzo", class: "btn btn-primary" %>
						</div>
					<% end %>
			      </div>
			    </div><!-- /.modal-content -->
			  </div><!-- /.modal-dialog -->
			</div><!-- /.modal --> 
		</div>
	</div>
<% end %>

<br>

<div class="row">
	<% @photographers.each do |photographer| %>

		<div class="col-md-4">
			<div class="panel panel-default">
				<div class="panel-heading preview">
					<!-- Image carousel -->
					<div class="row">
						<div class="col-md-12 center">
							<%= link_to photographer do %>
								<div id="carousel_<%= photographer.id %>" class="carousel slide" data-ride="carousel">
								  <!-- Indicators -->
								  <% if photographer.photos %>
									  <ol class="carousel-indicators">
										  <% photographer.photos.each do |photo| %>
										    <li data-target="#carousel_<%= photographer.id %>" data-slide-to="<%= photo.id %>"></li>
										  <% end %> 
									  </ol>
								  <% end %>

								  <!-- Wrapper for slides -->
								  <div class="carousel-inner" role="listbox">
								  	<% if photographer.photos %>
							  			<% photographer.photos.each do |photo| %>
									    	<div class="item <%= 'active' if photo.id == photographer.photos[0].id %> carousel-container-home", style="height: 192px">
									       		<%= image_tag photo.image.url(:medium), class: "img-responsive img-home" %>
									    	</div>
									    <% end %>
								    <% end %>
								  </div>

								  <!-- Left and right controls -->
								  <a class="left carousel-control" href="#carousel_<%= photographer.id %>" role="button" data-slide="prev">
								    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
								    <span class="sr-only">Previous</span>
								  </a>
								  <a class="right carousel-control" href="#carousel_<%= photographer.id %>" role="button" data-slide="next">
								    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
								    <span class="sr-only">Next</span>
								  </a>
								</div>
							<% end %>
						</div>
					</div>
				</div>
				<div class="panel-body">
					<%= link_to photographer.titolo, photographer %>
				</div>
			</div>
		</div>

	<% end %>
</div>